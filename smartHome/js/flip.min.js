(function(d){var l=function(b,e){b.data("flipped",!0);var a="rotate"+b.data("axis");b.find(b.data("front")).css({transform:a+(b.data("reverse")?"(-180deg)":"(180deg)"),"z-index":"0"});b.find(b.data("back")).css({transform:a+"(0deg)","z-index":"1"});b.one(h(),function(){d(this).trigger("flip:done");void 0!==e&&e.call(this)})},k=function(b,e){b.data("flipped",!1);var a="rotate"+b.data("axis");b.find(b.data("front")).css({transform:a+"(0deg)","z-index":"1"});b.find(b.data("back")).css({transform:a+(b.data("reverse")?
"(180deg)":"(-180deg)"),"z-index":"0"});b.one(h(),function(){d(this).trigger("flip:done");void 0!==e&&e.call(this)})},h=function(){var b,d=document.createElement("fakeelement"),a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(b in a)if(void 0!==d.style[b])return a[b]};d.fn.flip=function(b,e){"function"==typeof b&&(e=b);this.each(function(){var a=d(this);if(void 0===b||"boolean"!=typeof b&&"string"!=typeof b)if(a.data("initiated"))!b||
void 0===b.axis&&void 0===b.reverse||n.call(this,b,function(){a.trigger("flip:change");void 0!==e&&e.call(this)});else{a.data("initiated",!0);var c=d.extend({axis:"y",reverse:!1,trigger:"click",speed:500,forceHeight:!1,forceWidth:!1,autoSize:!0,front:"auto",back:"auto"},b);"auto"==c.front?c.front=0<a.find(".front").length?".front":"div:first-child":"autostrict"==c.front&&(c.front="div:first-child");"auto"==c.back?c.back=0<a.find(".back").length?".back":"div:first-child + div":"autostrict"==c.back&&
(c.back="div:first-child + div");a.data("reverse",c.reverse);a.data("axis",c.axis);a.data("front",c.front);a.data("back",c.back);var g="rotate"+("x"==c.axis.toLowerCase()?"x":"y"),h=2*a["outer"+("rotatex"==g?"Height":"Width")]();a.find(a.data("back")).css({transform:g+"("+(c.reverse?"180deg":"-180deg")+")"});a.css({perspective:h,position:"relative"});var p=c.speed/1E3||.5,f=a.find(c.front).add(c.back,a);c.forceHeight?f.outerHeight(a.height()):c.autoSize&&f.css({height:"100%"});c.forceWidth?f.outerWidth(a.width()):
c.autoSize&&f.css({width:"100%"});f.css({"backface-visibility":"hidden","transform-style":"preserve-3d",position:"absolute","z-index":"1"});f.find("*").css({"backface-visibility":"hidden"});a.find(a.data("back")).css({transform:g+"("+(c.reverse?"180deg":"-180deg")+")","z-index":"0"});(window.chrome||window.Intl&&Intl.v8BreakIterator)&&"CSS"in window&&a.css({"-webkit-transform-style":"preserve-3d"});setTimeout(function(){f.css({transition:"all "+p+"s ease-out"});void 0!==e&&e.call(this)},20);if("click"==
c.trigger.toLowerCase())a.on(d.fn.tap?"tap":"click",function(b){b||(b=window.event);a.find(d(b.target).closest('button, a, input[type="submit"]')).length||(a.data("flipped")?k(a):l(a))});else if("hover"==c.trigger.toLowerCase()){var m=function(){k(a)};a.mouseenter(function(){a.unbind("mouseleave",m);l(a);setTimeout(function(){a.bind("mouseleave",m);a.is(":hover")||k(a)},c.speed+150)});a.mouseleave(m)}}else"toggle"==b&&(b=!a.data("flipped")),b?l(a,e):k(a,e)});return this};var n=function(b,e){var a=
!1;void 0!==b.axis&&d(this).data("axis")!=b.axis.toLowerCase()&&(d(this).data("axis",b.axis.toLowerCase()),a=!0);void 0!==b.reverse&&d(this).data("reverse")!=b.reverse&&(d(this).data("reverse",b.reverse),a=!0);if(a){var c=d(this).find(d(this).data("front")).add(d(this).data("back"),d(this)),g=c.css("transition");c.css({transition:"none"});a="rotate"+d(this).data("axis");d(this).data("flipped")?d(this).find(d(this).data("front")).css({transform:a+(d(this).data("reverse")?"(-180deg)":"(180deg)"),"z-index":"0"}):
d(this).find(d(this).data("back")).css({transform:a+"("+(d(this).data("reverse")?"180deg":"-180deg")+")","z-index":"0"});setTimeout(function(){c.css({transition:g});e.call(this)}.bind(this),0)}else setTimeout(e.bind(this),0)}})(jQuery);